CC = gcc
LIBS_COMEDI = -lcomedi -lm
LIBS_RT = -lpthread -D_GNU_SOURCE

main: main.o model_library.o real_time_functions.o comedi_functions.o
	$(CC) -o main main.o model_library.o real_time_functions.o comedi_functions.o $(LIBS_COMEDI) $(LIBS_RT)

main.o: main.c model_library.c model_library.h real_time_functions.c real_time_functions.h comedi_functions.c comedi_functions.h
	$(CC) -c $(LIBS_COMEDI) main.c

model_library.o: model_library.c model_library.h
	$(CC) -c model_library.c

real_time_functions.o: real_time_functions.c real_time_functions.h
	$(CC) -c $(LIBS_COMEDI) $(LIBS_RT) real_time_functions.c

comedi_functions.o: comedi_functions.c comedi_functions.h
	$(CC) -c $(LIBS_COMEDI) comedi_functions.c

clean:
	rm -f main *.o